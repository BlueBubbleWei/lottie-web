<!DOCTYPE html>
<html style="width: 100%;height: 100%">
<head>
     <script src="../../build/player/lottie.js"></script>
<style>
h1 {
  position: absolute;
  color: white;
  z-index: 100;
}
button {
  position: absolute;
  top: 10px;
  right: 10px;
  z-index: 100;
}
</style>
</head>
<body style="background-color:#ccc; margin: 0px;height: 100%; font-family: sans-serif;font-size: 10px">
<button>Add jank</button>
<h1>Default renderer</h1>
<div style="width:100%;height:50%;background-color:#333;will-change: transform;" id="bodymovin-default"></div>
<h1>Paint worklet</h1>
<div style="width:100%;height:50%;background-color:#333;will-change: transform;" id="bodymovin"></div>

<script>

    var animData = {
        wrapper: document.getElementById('bodymovin'),
        animType: 'paintworklet',
        loop: true,
        prerender: true,
        autoplay: true,
        path: 'data.json'

    };
    var animData2 = {
        wrapper: document.getElementById('bodymovin-default'),
        loop: true,
        prerender: true,
        autoplay: true,
        path: 'data.json'

    };
    var anim = bodymovin.loadAnimation(animData);
    var anim2 = bodymovin.loadAnimation(animData2);
    var button = document.querySelector('button');
    var jankInterval;
    button.addEventListener('click', function() {
      if (jankInterval) {
        clearInterval(jankInterval);
        jankInterval = undefined;
        button.textContent = 'Add jank';
      } else {
        jankInterval = setInterval(() => {let start = performance.now(); while (performance.now() < start + 500);}, 1000);
        button.textContent = 'Stop jank';
      }
    });
</script>
</body>
</html>
